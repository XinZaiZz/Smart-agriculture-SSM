/**
 * jQuery JS Liyong jhtml-v4.0.0.js
 * 
 * Licensed under the GPL: http://www.liyong.com.cn/licenses.txt
 * 
 * Copyright 2010 liyong [ 343639986@qq.com ]
 * 
 * ----------------------------------------------------------------------------
 */
+function($){JHtml={version:'v4.0.0',context:'/'};JHtml.namespace=function(val){var source=val.split(".");var target=window[source[0]]=window[source[0]]||{};source=source.slice(1);for(i=0;i<source.length;i++){if(typeof target[source[i]]==="undefined"){target[source[i]]={}}target=target[source[i]]}return target};JHtml.apply=function(target,source,defaults){if(defaults){JHtml.apply(target,defaults)}if(target&&source&&typeof source=='object'){for(var p in source){target[p]=source[p]}}return target};JHtml.extend=function(subClass,superClass,defaults){var F=function(){};F.prototype=superClass.prototype;subClass.prototype=new F();subClass.prototype.constructor=subClass;subClass.superclass=superClass.prototype;if(superClass.prototype.constructor==Object.prototype.constructor){superClass.prototype.constructor=superClass}if(defaults){JHtml.apply(subClass,defaults)}if(subClass&&superClass&&typeof superClass=='object'){JHtml.apply(subClass,superClass)}if(subClass&&typeof subClass['init']==='function'){subClass['init']()}return subClass};JHtml.pattern=function(date,format){var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours()%12==0?12:date.getHours()%12,"H+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};var week={"0":"/u65e5","1":"/u4e00","2":"/u4e8c","3":"/u4e09","4":"/u56db","5":"/u4e94","6":"/u516d"};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}if(/(E+)/.test(format)){format=format.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"/u661f/u671f":"/u5468"):"")+week[date.getDay()+""])}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,(RegExp.$1.length==1)?(o[k]):(("00"+o[k]).substr((""+o[k]).length)))}}return format}}(jQuery);

/** 系统框架命名空间信息 */
JHtml.namespace('com.aifa.jhtml');

/**
 * ! jhtml.observe.js
 * 
 * @note: 系统基础组件类.
 * @author: Jonny zou
 * --------------------------------------------------------------------------------
 */
(function($) {
	
	"use strict";
	
	/** --------------------------------构造类与方法---------------------------------- */
	/**
	 * 系统基础构造方法类
	 */
	com.aifa.jhtml.Observe = function(element, opts) {
		
	};
	
	/** --------------------------------系统组件基础方法---------------------------------- */
	$.fn.observe = function(options, param) {
		if (typeof opts == 'string') {
			return $.fn.observe.methods[options](this, param);
		}
		var opts = options || {};
		return this.each(function() {
			var state = $.data(this, 'observe');
			if (state) {
				$.extend(state.opts, opts);
			} else {
				opts = $.extend({}, $.fn.observe.defaults, $.fn.observe.parseOptions(this), opts);
				$.data(this, 'observe', {
					options : opts,
					observe : $(this).addClass('jhtml-container')
				});
				init(this);
			}
			bindEvents(this);
		});
	};
	
	/** --------------------------------系统组件业务方法---------------------------------- */
	$.fn.observe.methods = {
		
	};
	
	/** --------------------------------系统配置参数---------------------------------- */
	$.fn.observe.parseOptions = function(target) {
		return $.extend({}, $.parser.parseOptions(target));
	};

	/** --------------------------------系统默认参数---------------------------------- */
	$.fn.observe.defaults = {
		id: "sid",
		text: "text",
		url : null,
		data : null,
		iconCls : null,
		method : "post",
		params : null,
		async : false,
		boxed: true,
		viewport: function(element, prefix){
			var target = element || window, prefix = prefix || "inner";
			return "innerWidth" in window || (prefix = "client", target = document.documentElement || document.body), {
				width: target[prefix + "Width"],
				height: target[prefix + "Height"]
			}
		},
		scrollbar: function(element, value) {
			var target = $(element), top = target && target.size() > 0 ? target.offset().top : 0;
			if ($("body").hasClass("jhtml-header-fixed")) {
				top -= $(".jhtml-header").height();
			} else if ($("body").hasClass("jhtml-header-top-fixed")) {
				top -= $(".jhtml-header-top").height();
			} else if ($("body").hasClass("jhtml-header-menu-fixed")) {
				top -= $(".jhtml-header-menu").height();
			}
			top += value ? value : -1 * target.height();
			$("html,body").animate({scrollTop: top}, "slow");
		},
		loading: function(element, message) {
			var msg = $("<div class='loading-message'></div>");
			msg.addClass("loading-message-boxed");
			msg.append("<span class='loading-image'></span>");
			msg.append("<span class='loading-context'>"+ (message || "正在处理中，请稍后...") +"</span>");
    	$(element || window).tooltips({ message: msg });
		},
		loaded: function(element, param){
			$(element || window).untooltips();
		},
		onLoadSuccess: function(data){
			
		}
	};
	
})(jQuery);


/**
 * ! jhtml.frame.js
 * 
 * @note: 系统框架组件类.
 * @author: Jonny zou
 * --------------------------------------------------------------------------------
 */
(function($) {
	
	"use strict";
	
	/** --------------------------------构造类与方法---------------------------------- */
	/**
	 * 系统框架构造方法类
	 */
	com.aifa.jhtml.Frame = function(element, opts) {
		// 调用父类构造方法.
		com.aifa.jhtml.Frame.superclass.constructor.call(this, element, opts);
	};
	
	/**
	 * 系统继承并重写基类方法.
	 */
	JHtml.extend(com.aifa.jhtml.Frame, com.aifa.jhtml.Observe, {
		init: function() {
			// 类实例化只有继承方法，没有自身方法.
		}
	});
	
	/**
	 * 显示登录系统时间方法.
	 */
	com.aifa.jhtml.Frame.prototype.initShowtime = function(element, opts) {
		var $this = this, date = opts.date || new Date();
		var time = "系统日期:&nbsp;";
		time += date.getFullYear() + "年";
		time += ((date.getMonth() < 10) ? "0" : "") + date.getMonth() + "月";
		time += ((date.getDate() < 10) ? "0" : "") + date.getDate() + "日 ";
		var day = date.getDay();
		var weekday = [ "星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六" ];
		time += ((date.getHours() < 10) ? "0" : "") + date.getHours() + ":";
		time += ((date.getMinutes() < 10) ? "0" : "") + date.getMinutes() + ":";
		time += ((date.getSeconds() < 10) ? "0" : "") + date.getSeconds() + " ";
		time += "&nbsp;" + weekday[day] + " ";
		$(element).html(time);
	};

	
	/**
	 * 初始化顶部滑动菜单方法.
	 */
	com.aifa.jhtml.Frame.prototype.initSidebar = function(element, opts) {
	  $(element).on("click", function(a) {
	      var t = $("body"), sidebar = $(".jhtml-sidebar"), sm = $(".jhtml-sidebar-menu");
	      $(".sidebar-search", sidebar).removeClass("open");
	      t.hasClass("jhtml-sidebar-closed") ? 
	      	(t.removeClass("jhtml-sidebar-closed"), sm.removeClass("jhtml-sidebar-menu-closed")) : 
	      		(t.addClass("jhtml-sidebar-closed"), sm.addClass("jhtml-sidebar-menu-closed"), t.hasClass("jhtml-sidebar-fixed")),
	      $(window).trigger("resize");
	  });
	};
	
	
	/**
	 * 初始化顶部全局搜索方法.
	 */
	com.aifa.jhtml.Frame.prototype.initSearch = function(element, opts) {
		$(element).on("click", function(e) {
        $(this).addClass("open"),
        $(this).find(".form-control").focus(),
        $(this).children(".input-group").addClass("shadow"),
        $(".jhtml-header .search-form .form-control").on("blur", function(e) {
            $(this).closest(".search-form").removeClass("open"),
            $(this).closest(".search-form").children(".input-group").removeClass("shadow"),
            $(this).unbind("blur");
        });
    }),
    $(".jhtml-header").on("keypress", ".search-form .form-control", function(e) {
        return 13 == e.which ? $(this).closest(".search-form").submit() : void 0;
    }),
    $(".jhtml-header").on("mousedown", ".search-form.open .submit", function(e) {
        e.preventDefault(), e.stopPropagation(),
        $(this).closest(".search-form").submit();
    });
	};
	
	
	/** --------------------------------对象初始化绑定-------------------------------- */
	/**
	 * 系统框架组件
	 */
	$.fn.frame = function(method, opts) {
		// 初始化系统参数信息.
		opts = $.extend({}, $.fn.frame.defaults, opts);
		// 系统迭代目标对象信息.
		return this.each(function() {
			// 初始化绑定对象实例信息.
			var target = $.data(this, opts.name);
			if (!target) {
				$.data(this, opts.name, (target = new com.aifa.jhtml.Frame(this, opts)));
			}
			// 系统调用目标方法.
			if (typeof method == "string") {
				return target[method](this, opts);
			}
		});
	};
	
	/**
	 * 系统框架默认参数
	 */
	$.fn.frame.defaults = $.extend($.fn.observe.defaults, {
		name : 'jhtml-frame'
	});
	
})(jQuery);

